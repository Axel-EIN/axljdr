{% extends 'element.html.twig' %}

{% block element_content %}

    <section class="col-12 p-1 mb-3">
        <div class="list-group">
            {% for i in 1..5 %}
                {% if attribute(rule, 'part' ~ i ~ 'titre') is defined and attribute(rule, 'part' ~ i ~ 'titre') is not empty %}
                    <a class="list-group-item list-group-item-action" href="#{{i}}" ><strong>{{ attribute(rule, 'part' ~ i ~ 'titre') }}</strong></a>
                {% endif %}
            {% endfor %}
        </div>
        {% if rule.pdf is defined and rule.pdf is not empty %}
            <a href="{{ asset(rule.pdf) }}" >
                <img class="img-fluid w-100 mt-3" src="{{ asset(rule.image|default(NA_IMG_PDF)) }}" />
            </a>
        {% else %}
            <img class="img-fluid w-100 mt-3" src="{{ asset(rule.image|default(NA_IMG_RULE)) }}" />
        {% endif %}
    </section>

    {% for i in 1..5 %}
        {% if attribute(rule, 'part' ~ i ~ 'titre') is defined and attribute(rule, 'part' ~ i ~ 'titre') is not empty %}
        <hr class="col-12 mb-3">
        <section id="{{i}}" class="col-8 p-1 mt-3 mb-3">
            <card class="card card-body">
                <h2 class="title-h3">{{ attribute(rule, 'part' ~ i ~ 'titre') }}</h2>
                <hr>
                <p class="text-justify text-regular p-2">{{ attribute(rule, 'part' ~ i)|raw|nl2br }}</p>
            </card>
        </section>
        {% endif %}

        {% if attribute(rule, 'part' ~ i ~ 'aside') is not empty %}
            <section class="col-4 p-1 mt-3 mb-3">
                <aside class="aside">
                    <p class="p-1 text-small text-justify">{{ attribute(rule, 'part' ~ i ~ 'aside')|raw|nl2br }}</p>
                </aside>
            </section>
        {% endif %}

    {% endfor %}

    {% if autresRules is defined and autresRules is not empty %}
    <!-- AUTRES -->
    <aside class="col-12 p-1">
        <div class="card card-body pb-1">
            <h2 class="title-h3">Autres Règles {% if rule.base %}de Bases{% else %}Annexes{% endif %}</h2>
            <hr>
            <div class="row p-0 m-0">
                {% for autreRule in autresRules %}
                    <a class="col-2 m-0 p-2 text-center hover-zoom relative hover-span-visible" href="{{ path('regles_rule', {id: autreRule.id} ) }}" title="{{autreRule.nom}}">
                        <img class="img-fluid" src="{{ asset(autreRule.image|default(NA_IMG_RULE)) }}" alt="Image d'une Règle" title="{{autreRule.nom}}"/>
                        <span class="text-small"><strong>{{autreRule.nom}}</strong></span>
                    </a>
                {% endfor %}
            </div>
        </div>
    </aside>
    {% endif %}


{% endblock %}
